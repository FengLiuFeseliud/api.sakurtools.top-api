<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>直链获取 - bilibili</title>
    <link rel="stylesheet" href="https://sakuratools.top/css/index.css">
    <link rel="stylesheet" href="https://sakuratools.top/css/api-md.css">
    <link rel="icon" href="https://sakuratools.top/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://sakuratools.top/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="top">
        <a href="https://sakuratools.top" class="title">
            <span class="title-2">Sakura</span>Tools.top
        </a>
        <span class="top-list">
            <a href="https://api.sakuratools.top">本站api文档</a>
            <a href="https://skln.xyz">skln</a>
            <a href="https://github.com/FengLiuFeseliud">github</a>
            <a href="https://space.bilibili.com/34394509">bilibili</a>
        </span>
    </div>

    <div class="api-md-list clearfix">
        <div class="list">
            <a href="https://api.sakuratools.top">API错误码</a>
            <a href="https://api.sakuratools.top/skln.html">短链接</a>
            <a href="https://api.sakuratools.top/pixiv.html">直链获取 - pixiv</a>
            <a href="https://api.sakuratools.top/bilibili.html">直链获取 - bilibili</a>
        </div>
        <div class="text">
            <span>
                <h2>1.0 bilibili</h2>
                <h3>以下接口需要请求时携带b站用户 cookie 才能获取1080画质</h3>
                <h3>使用大会员可以获取更高画质</h3>
                <h3>不携带 cookie 将以不登录情况下获取视频</h3>
                <h3>1.1 获取视频 cid(如果有分p包括分p)</h3>
                <p>https://api.sakuratools.top/bilibili/cid.php</p>
                <h3>请求方式: GET/POST</h3>
                <h3>请求参数:</h3>
                <p>bvid: 视频 bv 号</p>
                <h3>请求返回:</h3>
                <p>code: api 状态码</p>
                <p>msg: api 信息 错误时可以返回错误信息</p>
                <p>data -> 分p1 -> cid: 视频分p cid </p>
                <p>data -> 分p1 -> title: 视频分p标题 </p>
                <p>如有更多分p 全部以上格式返回</p>
                <h3>1.2 获取视频/分p清晰度</h3>
                <p>https://api.sakuratools.top/bilibili/quality.php</p>
                <h3>请求方式: GET/POST</h3>
                <h3>请求参数:</h3>
                <p>bvid: 视频 bv 号</p>
                <p>cid: 视频/分p cid号 (如果多分p, 填该分p cid)</p>
                <p>vip: 用户会员等级, 不填自动获取, 如果知道携带该参数可以加快 api 响应</p>
                <p>vip 支持的参数</p>
                <p>0: 未登录, 如果只用低画质可以不带 cookie 并且 vip 填0不然会返回未登录</p>
                <p>1: 普通用户, 可以获取1080P的画质, 不支持1080P+</p>
                <p>2: 大会员, 可以获取1080P以上的画质, 包括4K</p>
                <h3>请求返回:</h3>
                <p>code: api 状态码</p>
                <p>msg: api 信息 错误时可以返回错误信息</p>
                <p>根据当前会员状态与视频支持画质返回</p>
                <p>这里只展示一下数据结构</p>
                <p>data -> display_desc: 当前画质</p>
                <p>data -> format: "flv480" 不明</p>
                <p>data -> new_description: 画质说明</p>
                <p>data -> quality: 画质码</p>
                <p>data -> superscript: 同 new_description, 没啥用</p>
                <h3>1.3 获取视频直链</h3>
                <p>https://api.sakuratools.top/bilibili/video.php</p>
                <h3>请求方式: GET/POST</h3>
                <h3>请求参数:</h3>
                <p>bvid: 视频 bv 号</p>
                <p>cid: 视频/分p cid号 (如果多分p, 填该分p cid)</p>
                <p>qn: 画质码</p>
                <h3>请求返回:</h3>
                <p>code: api 状态码</p>
                <p>msg: api 信息 错误时可以返回错误信息</p>
                <p>data: 三条直链 后两条为备用</p>
                <h3>python demo:</h3>
                <a href="./demo/code/bilibili_api_demo1.py"><h3>python demo code</h3></a>
                <img src="./demo/img/bilibili_api_demo1.png", width="800", height="600">
            </span>
        </div>
    </div>
    <div class="bottom">
        <div class="copyright">
            <span>Copyright © 2022</span>
            <a href="https://space.bilibili.com/34394509">FengLiuFeseliud</a>
        </div>
    </div>
</body>
</html>